<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Web as Medium 1: Project 2</title>
  <link rel="stylesheet" href="styles.css">
  <script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
  <script src="script.js"></script>
</head>
<body>
  <section id="drawing-page" class="page active">
    <div class="main-container">
      <div class="instructions">
        <p>
          Think about someone you are grateful for. Then use this space to draw their portrait.
        </p>
      </div>
  
      <div class="canvas-container">
        <canvas id="canvas">
        </canvas>
      </div>
      
      <div class="toolbar">
        <div class="bounding-box">
          <input onInput="draw_color = this.value" type="color" id="color-picker" class="tool">
          <div class="tooltip">
            Color Picker
          </div>
        </div>
        <div class="bounding-box">
          <img src="images/pencil.png" alt="" id="pencil" class="tool">
          <div class="tooltip">
            Pencil
          </div>
        </div>
        <div class="bounding-box">
          <img src="images/ballpoint-pen.png" alt="" id="ballpoint-pen" class="tool">
          <div class="tooltip">
            Ballpoint Pen
          </div>
        </div>
        <div class="bounding-box">
          <img src="images/fountain-pen.png" alt="" id="fountain-pen" class="tool">
          <div class="tooltip">
            Fountain Pen
          </div>
        </div>
        <div class="bounding-box">
          <img src="images/eraser.png" alt="" id="eraser" class="tool">
          <div class="tooltip">
            Eraser
          </div>
        </div>
      </div>
    </div>
    <button onclick="switchPage('writing-page')">Go to Page 2</button>
  </section>
  
  <section id="writing-page">
    <div class="main-container">
      <div class="instructions">
        <p>
          Write a note to them or tell the world something about them.
        </p>
      </div>
  
      <div class="canvas-container">
        <textarea name="" id="text-area"></textarea>
      </div>
      
      <div class="toolbar">
        <div class="bounding-box">
          <img src="images/text.png" alt="" id="text" class="tool">
          <div class="tooltip">
            Text
          </div>
        </div>
        <div class="bounding-box">
          <img src="images/pencil.png" alt="" id="pencil" class="tool">
          <div class="tooltip">
            Pencil
          </div>
        </div>
        <div class="bounding-box">
          <img src="images/ballpoint-pen.png" alt="" id="ballpoint-pen" class="tool">
          <div class="tooltip">
            Ballpoint Pen
          </div>
        </div>
        <div class="bounding-box">
          <img src="images/fountain-pen.png" alt="" id="fountain-pen" class="tool">
          <div class="tooltip">
            Fountain Pen
          </div>
        </div>
        <div class="bounding-box">
          <img src="images/eraser.png" alt="" id="eraser" class="tool">
          <div class="tooltip">
            Eraser
          </div>
        </div>
      </div>
    </div>
  </section>
  
  <!-- <script>
    // DRAWING!!!
    const canvas = document.getElementById('canvas');
    canvas.width = 612; 
    canvas.height = 792;

    let context = canvas.getContext('2d');
    context.fillStyle = "white";
    context.fillRect(0, 0, canvas.width, canvas.height);

    let draw_color = "black";
    let draw_width = "10";
    let is_drawing = false;

    canvas.addEventListener('touchstart', start, false);
    canvas.addEventListener('touchmove', draw, false);
    canvas.addEventListener('mousedown', start, false);
    canvas.addEventListener('mousemove', draw, false);

    canvas.addEventListener('touchend', stop, false);
    canvas.addEventListener('mouseup', stop, false);
    canvas.addEventListener('mouseout', stop, false);

    function start(event) {
      is_drawing = true;
      context.beginPath();
      context.moveTo(event.clientX - canvas.offsetLeft, 
                    event.clientY - canvas.offsetTop);
      event.preventDefault();
    }

    function draw(event) {
      if (is_drawing) {
        context.lineTo(event.clientX - canvas.offsetLeft, event.clientY - canvas.offsetTop);
        context.strokeStyle = draw_color;
        context.lineWidth = draw_width;
        context.lineCap = 'round';
        context.lineJoin = 'round';
        context.stroke();
      }
      event.preventDefault();
    }

    function stop(event) {
      if (is_drawing) {
        context.stroke();
        context.closePath();
        is_drawing = false;
      }
      event.preventDefault();
    }
  </script>
   -->

   <script>
      // Initial drawing settings
      let draw_color = "black";  // Default draw color
      let draw_width = 8;  // Default draw width for pencil
      let is_drawing = false;
      let current_tool = 'pencil';  // Default tool is pencil

      // Get the canvas context
      const canvas = document.getElementById('canvas');
      canvas.width = 612;
      canvas.height = 792;

      let context = canvas.getContext('2d');
      context.fillStyle = "white";
      context.fillRect(0, 0, canvas.width, canvas.height);

      // Add event listeners for drawing actions
      canvas.addEventListener('touchstart', start, false);
      canvas.addEventListener('touchmove', draw, false);
      canvas.addEventListener('mousedown', start, false);
      canvas.addEventListener('mousemove', draw, false);
      canvas.addEventListener('touchend', stop, false);
      canvas.addEventListener('mouseup', stop, false);
      canvas.addEventListener('mouseout', stop, false);

      // Start drawing
      function start(event) {
        is_drawing = true;
        context.beginPath();
        context.moveTo(event.clientX - canvas.offsetLeft, 
                      event.clientY - canvas.offsetTop);
        event.preventDefault();
      }

      // Draw on canvas
      function draw(event) {
        if (is_drawing) {
          context.lineTo(event.clientX - canvas.offsetLeft, event.clientY - canvas.offsetTop);
          context.strokeStyle = draw_color;
          context.lineWidth = draw_width;
          context.lineCap = 'round';
          context.lineJoin = 'round';
          context.stroke();
        }
        event.preventDefault();
      }

      // Stop drawing
      function stop(event) {
        if (is_drawing) {
          context.stroke();
          context.closePath();
          is_drawing = false;
        }
        event.preventDefault();
      }

      // Tool selection handlers
      document.getElementById('pencil').addEventListener('click', function() {
        // When pencil is selected, use the color picker value and set draw_width to 8
        draw_color = document.getElementById('color-picker').value; // Use color picker value
        draw_width = 8; // Pencil width
        current_tool = 'pencil';
      });

      document.getElementById('ballpoint-pen').addEventListener('click', function() {
        // When ballpoint pen is selected, use the color picker value and set draw_width to 10
        draw_color = document.getElementById('color-picker').value; // Use color picker value
        draw_width = 12; // Ballpoint pen width
        current_tool = 'ballpoint-pen';
      });

      document.getElementById('fountain-pen').addEventListener('click', function() {
        // When fountain pen is selected, use the color picker value and set draw_width to 12
        draw_color = document.getElementById('color-picker').value; // Use color picker value
        draw_width = 20; // Fountain pen width
        current_tool = 'fountain-pen';
      });

      document.getElementById('eraser').addEventListener('click', function() {
        // When eraser is selected, force the color to white and set draw_width to 12
        draw_color = "white"; // Eraser color is always white
        draw_width = 30; // Eraser width
        current_tool = 'eraser';
      });

      // Color picker event listener
      document.getElementById('color-picker').addEventListener('input', function(event) {
        // If the current tool is not the eraser, update the draw_color to the selected value
        if (current_tool !== 'eraser') {
          draw_color = event.target.value; // Update color for drawing tools
        }
      });

  </script>
</body>
</html>